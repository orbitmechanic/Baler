{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\n\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\n\nvar _promiseUtils = require(\"./promiseUtils\");\n/**\r\n * Copyright (c) 2015-present, Parse, LLC.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the BSD-style license found in the\r\n * LICENSE file in the root directory of this source tree. An additional grant\r\n * of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n * @flow\r\n */\n\n\nvar TaskQueue = /*#__PURE__*/function () {\n  function TaskQueue() {\n    (0, _classCallCheck2.default)(this, TaskQueue);\n    (0, _defineProperty2.default)(this, \"queue\", void 0);\n    this.queue = [];\n  }\n\n  (0, _createClass2.default)(TaskQueue, [{\n    key: \"enqueue\",\n    value: function (task\n    /*: () => Promise*/\n    )\n    /*: Promise*/\n    {\n      var _this = this;\n\n      var taskComplete = new _promiseUtils.resolvingPromise();\n      this.queue.push({\n        task: task,\n        _completion: taskComplete\n      });\n\n      if (this.queue.length === 1) {\n        task().then(function () {\n          _this._dequeue();\n\n          taskComplete.resolve();\n        }, function (error) {\n          _this._dequeue();\n\n          taskComplete.reject(error);\n        });\n      }\n\n      return taskComplete;\n    }\n  }, {\n    key: \"_dequeue\",\n    value: function () {\n      var _this2 = this;\n\n      this.queue.shift();\n\n      if (this.queue.length) {\n        var next = this.queue[0];\n        next.task().then(function () {\n          _this2._dequeue();\n\n          next._completion.resolve();\n        }, function (error) {\n          _this2._dequeue();\n\n          next._completion.reject(error);\n        });\n      }\n    }\n  }]);\n  return TaskQueue;\n}();\n\nmodule.exports = TaskQueue;","map":{"version":3,"sources":["D:/8 Github/baler/node_modules/moralis/lib/browser/TaskQueue.js"],"names":["_interopRequireDefault","require","_classCallCheck2","_createClass2","_defineProperty2","_promiseUtils","TaskQueue","default","queue","key","value","task","_this","taskComplete","resolvingPromise","push","_completion","length","then","_dequeue","resolve","error","reject","_this2","shift","next","module","exports"],"mappings":"AAAA;;AAEA,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,sDAAD,CAApC;;AAEA,IAAIC,gBAAgB,GAAGF,sBAAsB,CAACC,OAAO,CAAC,+CAAD,CAAR,CAA7C;;AAEA,IAAIE,aAAa,GAAGH,sBAAsB,CAACC,OAAO,CAAC,4CAAD,CAAR,CAA1C;;AAEA,IAAIG,gBAAgB,GAAGJ,sBAAsB,CAACC,OAAO,CAAC,+CAAD,CAAR,CAA7C;;AAEA,IAAII,aAAa,GAAGJ,OAAO,CAAC,gBAAD,CAA3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,IAAIK,SAAS,GAAG,aAAa,YAAY;AACvC,WAASA,SAAT,GAAqB;AACnB,KAAC,GAAGJ,gBAAgB,CAACK,OAArB,EAA8B,IAA9B,EAAoCD,SAApC;AACA,KAAC,GAAGF,gBAAgB,CAACG,OAArB,EAA8B,IAA9B,EAAoC,OAApC,EAA6C,KAAK,CAAlD;AACA,SAAKC,KAAL,GAAa,EAAb;AACD;;AAED,GAAC,GAAGL,aAAa,CAACI,OAAlB,EAA2BD,SAA3B,EAAsC,CAAC;AACrCG,IAAAA,GAAG,EAAE,SADgC;AAErCC,IAAAA,KAAK,EAAE,UAAUC;AACjB;AADO;AAGP;AACA;AACE,UAAIC,KAAK,GAAG,IAAZ;;AAEA,UAAIC,YAAY,GAAG,IAAIR,aAAa,CAACS,gBAAlB,EAAnB;AACA,WAAKN,KAAL,CAAWO,IAAX,CAAgB;AACdJ,QAAAA,IAAI,EAAEA,IADQ;AAEdK,QAAAA,WAAW,EAAEH;AAFC,OAAhB;;AAKA,UAAI,KAAKL,KAAL,CAAWS,MAAX,KAAsB,CAA1B,EAA6B;AAC3BN,QAAAA,IAAI,GAAGO,IAAP,CAAY,YAAY;AACtBN,UAAAA,KAAK,CAACO,QAAN;;AAEAN,UAAAA,YAAY,CAACO,OAAb;AACD,SAJD,EAIG,UAAUC,KAAV,EAAiB;AAClBT,UAAAA,KAAK,CAACO,QAAN;;AAEAN,UAAAA,YAAY,CAACS,MAAb,CAAoBD,KAApB;AACD,SARD;AASD;;AAED,aAAOR,YAAP;AACD;AA5BoC,GAAD,EA6BnC;AACDJ,IAAAA,GAAG,EAAE,UADJ;AAEDC,IAAAA,KAAK,EAAE,YAAY;AACjB,UAAIa,MAAM,GAAG,IAAb;;AAEA,WAAKf,KAAL,CAAWgB,KAAX;;AAEA,UAAI,KAAKhB,KAAL,CAAWS,MAAf,EAAuB;AACrB,YAAIQ,IAAI,GAAG,KAAKjB,KAAL,CAAW,CAAX,CAAX;AACAiB,QAAAA,IAAI,CAACd,IAAL,GAAYO,IAAZ,CAAiB,YAAY;AAC3BK,UAAAA,MAAM,CAACJ,QAAP;;AAEAM,UAAAA,IAAI,CAACT,WAAL,CAAiBI,OAAjB;AACD,SAJD,EAIG,UAAUC,KAAV,EAAiB;AAClBE,UAAAA,MAAM,CAACJ,QAAP;;AAEAM,UAAAA,IAAI,CAACT,WAAL,CAAiBM,MAAjB,CAAwBD,KAAxB;AACD,SARD;AASD;AACF;AAnBA,GA7BmC,CAAtC;AAkDA,SAAOf,SAAP;AACD,CA1D4B,EAA7B;;AA4DAoB,MAAM,CAACC,OAAP,GAAiBrB,SAAjB","sourcesContent":["\"use strict\";\r\n\r\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\r\n\r\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/classCallCheck\"));\r\n\r\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/createClass\"));\r\n\r\nvar _defineProperty2 = _interopRequireDefault(require(\"@babel/runtime-corejs3/helpers/defineProperty\"));\r\n\r\nvar _promiseUtils = require(\"./promiseUtils\");\r\n/**\r\n * Copyright (c) 2015-present, Parse, LLC.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the BSD-style license found in the\r\n * LICENSE file in the root directory of this source tree. An additional grant\r\n * of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n * @flow\r\n */\r\n\r\n\r\nvar TaskQueue = /*#__PURE__*/function () {\r\n  function TaskQueue() {\r\n    (0, _classCallCheck2.default)(this, TaskQueue);\r\n    (0, _defineProperty2.default)(this, \"queue\", void 0);\r\n    this.queue = [];\r\n  }\r\n\r\n  (0, _createClass2.default)(TaskQueue, [{\r\n    key: \"enqueue\",\r\n    value: function (task\r\n    /*: () => Promise*/\r\n    )\r\n    /*: Promise*/\r\n    {\r\n      var _this = this;\r\n\r\n      var taskComplete = new _promiseUtils.resolvingPromise();\r\n      this.queue.push({\r\n        task: task,\r\n        _completion: taskComplete\r\n      });\r\n\r\n      if (this.queue.length === 1) {\r\n        task().then(function () {\r\n          _this._dequeue();\r\n\r\n          taskComplete.resolve();\r\n        }, function (error) {\r\n          _this._dequeue();\r\n\r\n          taskComplete.reject(error);\r\n        });\r\n      }\r\n\r\n      return taskComplete;\r\n    }\r\n  }, {\r\n    key: \"_dequeue\",\r\n    value: function () {\r\n      var _this2 = this;\r\n\r\n      this.queue.shift();\r\n\r\n      if (this.queue.length) {\r\n        var next = this.queue[0];\r\n        next.task().then(function () {\r\n          _this2._dequeue();\r\n\r\n          next._completion.resolve();\r\n        }, function (error) {\r\n          _this2._dequeue();\r\n\r\n          next._completion.reject(error);\r\n        });\r\n      }\r\n    }\r\n  }]);\r\n  return TaskQueue;\r\n}();\r\n\r\nmodule.exports = TaskQueue;"]},"metadata":{},"sourceType":"script"}