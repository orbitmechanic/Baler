{"ast":null,"code":"var _jsxFileName = \"/home/drhongo/Documents/hackatons/baler/src/App.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport React, { useState } from 'react'; //Bootstrap\n\nimport './bootstrap.min.css';\nimport Container from 'react-bootstrap/Container';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport Button from 'react-bootstrap/Button'; //Components\n\nimport LogButton from './components/logButton';\nimport MinterSpace from './components/minterSpace';\nimport CharacterSheet from './components/characterSheet'; //Helpers\n// Extras\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Moralis = require('moralis');\n\nfunction App() {\n  _s();\n\n  const [user, setUser] = useState(null);\n  const [userData, setUserData] = useState(null);\n  const [gallery, setGallery] = useState(null);\n  const [nftSelected, setNftSelected] = useState(null); // Moralis confs\n\n  Moralis.initialize(\"GsvY24d7vRLDtU5ixRYK10Ry7GscQEJP8mDVzzY3\");\n  Moralis.serverURL = 'https://wvtjjsmhximj.moralis.io:2053/server'; //Moralis functions\n\n  const currentUser = Moralis.User.current();\n\n  if (currentUser) {\n    if (!user) {\n      setUser(currentUser);\n      fetchUserData(currentUser);\n      getGallery(currentUser.attributes.ethAddress);\n    }\n  } else {\n    console.log('should explain protocol and ask for login');\n  }\n\n  Moralis.Web3.onAccountsChanged(async function (accounts) {\n    alert('Account changed!');\n    setUserData(null);\n  });\n\n  async function login() {\n    let userAuth;\n\n    try {\n      userAuth = await Moralis.Web3.authenticate();\n      setUser(userAuth);\n      fetchUserData(userAuth);\n      alert(\"User logged in\");\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  async function logout() {\n    console.log('Login out');\n    Moralis.User.logOut().then(() => {\n      const currentUser = Moralis.User.current(); // this will now be null\n\n      setUser(currentUser);\n      setUserData(null);\n    });\n  }\n\n  function getProfileForAddress(address) {\n    return address ? Moralis.Cloud.run(\"getProfileForAddress\", {\n      address\n    }) : null;\n  } //Backend queries\n\n\n  async function fetchUserData(currentUser) {\n    let usernameRetrieve = await currentUser.get('username');\n    let emailRetrieve = await currentUser.get('email');\n    let ethAddress = await currentUser.get('ethAddress');\n    await setUserData({\n      username: usernameRetrieve,\n      email: emailRetrieve,\n      address: ethAddress\n    });\n  }\n\n  async function getGallery(address) {\n    // get user profile\n    const targetAddress = address;\n    console.log('address targeted: ', targetAddress);\n    const profile = await getProfileForAddress(targetAddress);\n    console.log('Profile: ', profile);\n\n    if (profile.pics.length > 0) {\n      setGallery(profile.pics);\n    } else {\n      alert(\"No pics from: \", {\n        address\n      });\n    }\n  }\n\n  async function getMyGallery() {\n    // get user profile\n    getGallery(userData.address);\n  } //App handler functions\n\n\n  function selectNft(pic) {\n    setNftSelected(pic); // setGalleryOpen(false);\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    fluid: true,\n    className: \"App\",\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      style: {\n        height: '70px',\n        padding: '5px 0'\n      },\n      className: \"justify-content-end\",\n      children: [userData && userData.address ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginRight: '5px'\n        },\n        children: [userData.address.slice(0, 7), \"..\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this) : null, /*#__PURE__*/_jsxDEV(LogButton, {\n        userData: userData,\n        login: login,\n        logout: logout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), userData ? /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginLeft: '5px',\n          marginRight: '5px'\n        },\n        children: [userData.username, /*#__PURE__*/_jsxDEV(Button, {\n          onClick: () => {\n            console.log('TODO');\n          },\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 13\n      }, this) : null, user && !userData ? /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => {\n          console.log('TODO');\n        },\n        children: \"Set\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 11\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"flex justify-content-center border\",\n      style: {\n        background: 'lightblue'\n      },\n      onClick: () => {\n        setNftSelected(null);\n      },\n      children: /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Mint new NFT\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"flex border\",\n      children: nftSelected ? /*#__PURE__*/_jsxDEV(CharacterSheet, {\n        user: user,\n        nftSelected: nftSelected\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(MinterSpace, {\n        user: user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \" justify-content-center border\",\n      style: {\n        background: 'lightgreen'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"My Collection \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 9\n      }, this), gallery ? /*#__PURE__*/_jsxDEV(\"h3\", {\n        style: {\n          marginLeft: '5px'\n        },\n        children: gallery.length\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 18\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: gallery ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container center\",\n        id: \"gallery\",\n        children: gallery.map(function (d) {\n          return /*#__PURE__*/_jsxDEV(\"a\", {\n            onClick: () => {\n              setNftSelected(d);\n            },\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: d.url,\n              alt: d.name,\n              height: \"200\",\n              width: \"200\",\n              margin: \"5px\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 164,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 163,\n            columnNumber: 17\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"center\",\n        children: \"You have no NFTs minted! Do your first!!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Col, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(Col, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(Col, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(Row, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \" justify-content-center border\",\n      style: {\n        background: 'grey'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"center\",\n        children: \"Likes\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \" justify-content-center border\",\n      style: {\n        background: 'coral'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"center\",\n        children: \"Other users\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 190,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"/ng4C1kfz/u6rVJaqURyX34jq+k=\");\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/home/drhongo/Documents/hackatons/baler/src/App.js"],"names":["React","useState","Container","Col","Row","Button","LogButton","MinterSpace","CharacterSheet","Moralis","require","App","user","setUser","userData","setUserData","gallery","setGallery","nftSelected","setNftSelected","initialize","serverURL","currentUser","User","current","fetchUserData","getGallery","attributes","ethAddress","console","log","Web3","onAccountsChanged","accounts","alert","login","userAuth","authenticate","error","logout","logOut","then","getProfileForAddress","address","Cloud","run","usernameRetrieve","get","emailRetrieve","username","email","targetAddress","profile","pics","length","getMyGallery","selectNft","pic","height","padding","marginRight","slice","marginLeft","background","map","d","url","name"],"mappings":";;;AAAA,OAAO,WAAP;AACA,OAAOA,KAAP,IAAeC,QAAf,QAA8B,OAA9B,C,CACA;;AACA,OAAO,qBAAP;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,GAAP,MAAgB,qBAAhB;AACA,OAAOC,MAAP,MAAmB,wBAAnB,C,CAEA;;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,WAAP,MAAwB,0BAAxB;AACA,OAAOC,cAAP,MAA2B,6BAA3B,C,CACA;AAEA;;;;AACA,MAAMC,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AAEA,SAASC,GAAT,GAAe;AAAA;;AACb,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBZ,QAAQ,CAAC,IAAD,CAAhC;AACA,QAAM,CAACa,QAAD,EAAWC,WAAX,IAA0Bd,QAAQ,CAAC,IAAD,CAAxC;AACA,QAAM,CAACe,OAAD,EAAUC,UAAV,IAAwBhB,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAACiB,WAAD,EAAcC,cAAd,IAAgClB,QAAQ,CAAC,IAAD,CAA9C,CAJa,CAMf;;AACEQ,EAAAA,OAAO,CAACW,UAAR,CAAmB,0CAAnB;AACAX,EAAAA,OAAO,CAACY,SAAR,GAAoB,6CAApB,CARa,CAUb;;AACA,QAAMC,WAAW,GAAGb,OAAO,CAACc,IAAR,CAAaC,OAAb,EAApB;;AACA,MAAIF,WAAJ,EAAiB;AACf,QAAG,CAACV,IAAJ,EAAS;AACPC,MAAAA,OAAO,CAACS,WAAD,CAAP;AACAG,MAAAA,aAAa,CAACH,WAAD,CAAb;AACAI,MAAAA,UAAU,CAACJ,WAAW,CAACK,UAAZ,CAAuBC,UAAxB,CAAV;AACD;AACF,GAND,MAMO;AACLC,IAAAA,OAAO,CAACC,GAAR,CAAY,2CAAZ;AACD;;AAEDrB,EAAAA,OAAO,CAACsB,IAAR,CAAaC,iBAAb,CAA+B,gBAAgBC,QAAhB,EAA0B;AACvDC,IAAAA,KAAK,CAAC,kBAAD,CAAL;AACAnB,IAAAA,WAAW,CAAC,IAAD,CAAX;AACD,GAHD;;AAKA,iBAAeoB,KAAf,GAAuB;AACrB,QAAIC,QAAJ;;AACE,QAAI;AACAA,MAAAA,QAAQ,GAAG,MAAM3B,OAAO,CAACsB,IAAR,CAAaM,YAAb,EAAjB;AACAxB,MAAAA,OAAO,CAACuB,QAAD,CAAP;AACAX,MAAAA,aAAa,CAACW,QAAD,CAAb;AACAF,MAAAA,KAAK,CAAC,gBAAD,CAAL;AACH,KALD,CAKE,OAAOI,KAAP,EAAc;AACZT,MAAAA,OAAO,CAACC,GAAR,CAAYQ,KAAZ;AACH;AACF;;AACH,iBAAeC,MAAf,GAAuB;AACnBV,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACArB,IAAAA,OAAO,CAACc,IAAR,CAAaiB,MAAb,GAAsBC,IAAtB,CAA2B,MAAM;AAC/B,YAAMnB,WAAW,GAAGb,OAAO,CAACc,IAAR,CAAaC,OAAb,EAApB,CAD+B,CACc;;AAC7CX,MAAAA,OAAO,CAACS,WAAD,CAAP;AACAP,MAAAA,WAAW,CAAC,IAAD,CAAX;AACD,KAJD;AAKD;;AAEH,WAAS2B,oBAAT,CAA8BC,OAA9B,EAAuC;AACnC,WAAOA,OAAO,GACVlC,OAAO,CAACmC,KAAR,CAAcC,GAAd,CAAkB,sBAAlB,EAA0C;AAAEF,MAAAA;AAAF,KAA1C,CADU,GAEV,IAFJ;AAGD,GAnDU,CAqDf;;;AACE,iBAAelB,aAAf,CAA6BH,WAA7B,EAAyC;AACvC,QAAIwB,gBAAgB,GAAG,MAAMxB,WAAW,CAACyB,GAAZ,CAAgB,UAAhB,CAA7B;AACA,QAAIC,aAAa,GAAG,MAAM1B,WAAW,CAACyB,GAAZ,CAAgB,OAAhB,CAA1B;AACA,QAAInB,UAAU,GAAG,MAAMN,WAAW,CAACyB,GAAZ,CAAgB,YAAhB,CAAvB;AACA,UAAMhC,WAAW,CAAC;AAACkC,MAAAA,QAAQ,EAACH,gBAAV;AAA4BI,MAAAA,KAAK,EAACF,aAAlC;AAAiDL,MAAAA,OAAO,EAAEf;AAA1D,KAAD,CAAjB;AACD;;AAGD,iBAAeF,UAAf,CAA0BiB,OAA1B,EAAkC;AAC9B;AACA,UAAMQ,aAAa,GAAGR,OAAtB;AACAd,IAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAiCqB,aAAjC;AACA,UAAMC,OAAO,GAAG,MAAMV,oBAAoB,CAACS,aAAD,CAA1C;AACAtB,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAwBsB,OAAxB;;AACA,QAAIA,OAAO,CAACC,IAAR,CAAaC,MAAb,GAAsB,CAA1B,EAA6B;AAC3BrC,MAAAA,UAAU,CAACmC,OAAO,CAACC,IAAT,CAAV;AACD,KAFD,MAEO;AACLnB,MAAAA,KAAK,CAAC,gBAAD,EAAkB;AAACS,QAAAA;AAAD,OAAlB,CAAL;AACD;AACF;;AAEH,iBAAeY,YAAf,GAA8B;AAC1B;AACA7B,IAAAA,UAAU,CAACZ,QAAQ,CAAC6B,OAAV,CAAV;AACD,GA9EU,CAiFf;;;AACE,WAASa,SAAT,CAAmBC,GAAnB,EAAuB;AACrBtC,IAAAA,cAAc,CAACsC,GAAD,CAAd,CADqB,CAErB;AACD;;AAKD,sBACE,QAAC,SAAD;AAAW,IAAA,KAAK,MAAhB;AAAiB,IAAA,SAAS,EAAC,KAA3B;AAAA,4BACE,QAAC,GAAD;AAAK,MAAA,KAAK,EAAE;AAAEC,QAAAA,MAAM,EAAE,MAAV;AAAkBC,QAAAA,OAAO,EAAE;AAA3B,OAAZ;AAAmD,MAAA,SAAS,EAAC,qBAA7D;AAAA,iBAEI7C,QAAQ,IAAIA,QAAQ,CAAC6B,OAArB,gBACA;AAAK,QAAA,KAAK,EAAE;AAACiB,UAAAA,WAAW,EAAE;AAAd,SAAZ;AAAA,mBACK9C,QAAQ,CAAC6B,OAAT,CAAiBkB,KAAjB,CAAuB,CAAvB,EAAyB,CAAzB,CADL;AAAA;AAAA;AAAA;AAAA;AAAA,cADA,GAID,IANH,eAOE,QAAC,SAAD;AACE,QAAA,QAAQ,EAAE/C,QADZ;AAEE,QAAA,KAAK,EAAEqB,KAFT;AAGE,QAAA,MAAM,EAAEI;AAHV;AAAA;AAAA;AAAA;AAAA,cAPF,EAYIzB,QAAQ,gBACN;AAAK,QAAA,KAAK,EAAE;AAACgD,UAAAA,UAAU,EAAE,KAAb;AAAmBF,UAAAA,WAAW,EAAE;AAAhC,SAAZ;AAAA,mBACK9C,QAAQ,CAACmC,QADd,eAEI,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAE,MAAI;AAACpB,YAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AAAoB,WAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cADM,GAKP,IAjBL,EAmBGlB,IAAI,IAAI,CAACE,QAAT,gBACC,QAAC,MAAD;AAAQ,QAAA,OAAO,EAAE,MAAI;AAACe,UAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AAAoB,SAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,GAEA,IArBH;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAwBE,QAAC,GAAD;AACE,MAAA,SAAS,EAAC,oCADZ;AAEE,MAAA,KAAK,EAAE;AAACiC,QAAAA,UAAU,EAAE;AAAb,OAFT;AAGE,MAAA,OAAO,EAAE,MAAI;AAAC5C,QAAAA,cAAc,CAAC,IAAD,CAAd;AAAqB,OAHrC;AAAA,6BAMI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AANJ;AAAA;AAAA;AAAA;AAAA,YAxBF,eAgCE,QAAC,GAAD;AAAK,MAAA,SAAS,EAAC,aAAf;AAAA,gBAEGD,WAAW,gBACV,QAAC,cAAD;AACE,QAAA,IAAI,EAAEN,IADR;AAEE,QAAA,WAAW,EAAEM;AAFf;AAAA;AAAA;AAAA;AAAA,cADU,gBAMV,QAAC,WAAD;AAAc,QAAA,IAAI,EAAEN;AAApB;AAAA;AAAA;AAAA;AAAA;AARJ;AAAA;AAAA;AAAA;AAAA,YAhCF,eA2CE,QAAC,GAAD;AAAK,MAAA,SAAS,EAAC,gCAAf;AAAgD,MAAA,KAAK,EAAE;AAACmD,QAAAA,UAAU,EAAE;AAAb,OAAvD;AAAA,8BAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAFF,EAGG/C,OAAO,gBAAC;AAAI,QAAA,KAAK,EAAE;AAAC8C,UAAAA,UAAU,EAAC;AAAZ,SAAX;AAAA,kBAAgC9C,OAAO,CAACsC;AAAxC;AAAA;AAAA;AAAA;AAAA,cAAD,GAAsD,IAHhE;AAAA;AAAA;AAAA;AAAA;AAAA,YA3CF,eAgDE,QAAC,GAAD;AAAA,gBACItC,OAAO,gBACP;AAAK,QAAA,SAAS,EAAC,kBAAf;AAAkC,QAAA,EAAE,EAAC,SAArC;AAAA,kBACGA,OAAO,CAACgD,GAAR,CAAY,UAASC,CAAT,EAAW;AACtB,8BACE;AAAG,YAAA,OAAO,EAAE,MAAI;AAAC9C,cAAAA,cAAc,CAAC8C,CAAD,CAAd;AAAkB,aAAnC;AAAA,mCACE;AAAK,cAAA,GAAG,EAAEA,CAAC,CAACC,GAAZ;AAAiB,cAAA,GAAG,EAAED,CAAC,CAACE,IAAxB;AAA8B,cAAA,MAAM,EAAC,KAArC;AAA2C,cAAA,KAAK,EAAC,KAAjD;AAAuD,cAAA,MAAM,EAAC;AAA9D;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,kBADF;AAKG,SANJ;AADH;AAAA;AAAA;AAAA;AAAA,cADO,gBAWP;AAAG,QAAA,SAAS,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAZJ;AAAA;AAAA;AAAA;AAAA,YAhDF,eA+DM,QAAC,GAAD;AAAA;AAAA;AAAA;AAAA,YA/DN,eAkEM,QAAC,GAAD;AAAA;AAAA;AAAA;AAAA,YAlEN,eAqEM,QAAC,GAAD;AAAA;AAAA;AAAA;AAAA,YArEN,eAwEI,QAAC,GAAD;AAAA;AAAA;AAAA;AAAA,YAxEJ,eA0EE,QAAC,GAAD;AAAK,MAAA,SAAS,EAAC,gCAAf;AAAgD,MAAA,KAAK,EAAE;AAACJ,QAAAA,UAAU,EAAE;AAAb,OAAvD;AAAA,6BAEA;AAAI,QAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA,YA1EF,eA8EE,QAAC,GAAD;AAAK,MAAA,SAAS,EAAC,gCAAf;AAAgD,MAAA,KAAK,EAAE;AAACA,QAAAA,UAAU,EAAE;AAAb,OAAvD;AAAA,6BAEA;AAAI,QAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AAAA;AAAA;AAAA;AAAA,YA9EF;AAAA;AAAA;AAAA;AAAA;AAAA,UADF;AAqFD;;GA/KQpD,G;;KAAAA,G;AAiLT,eAAeA,GAAf","sourcesContent":["import './App.css';\nimport React, {useState} from 'react';\n//Bootstrap\nimport './bootstrap.min.css';\nimport Container from 'react-bootstrap/Container'\nimport Col from 'react-bootstrap/Col'\nimport Row from 'react-bootstrap/Row'\nimport Button from 'react-bootstrap/Button'\n\n//Components\nimport LogButton from './components/logButton';\nimport MinterSpace from './components/minterSpace';\nimport CharacterSheet from './components/characterSheet';\n//Helpers\n\n// Extras\nconst Moralis = require('moralis');\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [userData, setUserData] = useState(null);\n  const [gallery, setGallery] = useState(null);\n  const [nftSelected, setNftSelected] = useState(null);\n\n// Moralis confs\n  Moralis.initialize(\"GsvY24d7vRLDtU5ixRYK10Ry7GscQEJP8mDVzzY3\");\n  Moralis.serverURL = 'https://wvtjjsmhximj.moralis.io:2053/server'\n\n  //Moralis functions\n  const currentUser = Moralis.User.current();\n  if (currentUser) {\n    if(!user){\n      setUser(currentUser);\n      fetchUserData(currentUser);\n      getGallery(currentUser.attributes.ethAddress)\n    }\n  } else {\n    console.log('should explain protocol and ask for login');\n  }\n\n  Moralis.Web3.onAccountsChanged(async function (accounts) {\n    alert('Account changed!')\n    setUserData(null);\n  });\n\n  async function login() {\n    let userAuth;\n      try {\n          userAuth = await Moralis.Web3.authenticate();\n          setUser(userAuth);\n          fetchUserData(userAuth);\n          alert(\"User logged in\")\n      } catch (error) {\n          console.log(error);\n      }\n    }\n  async function logout(){\n      console.log('Login out');\n      Moralis.User.logOut().then(() => {\n        const currentUser = Moralis.User.current();  // this will now be null\n        setUser(currentUser);\n        setUserData(null);\n      });\n    }\n\n  function getProfileForAddress(address) {\n      return address\n        ? Moralis.Cloud.run(\"getProfileForAddress\", { address })\n        : null;\n    }\n\n//Backend queries\n  async function fetchUserData(currentUser){\n    let usernameRetrieve = await currentUser.get('username')\n    let emailRetrieve = await currentUser.get('email')\n    let ethAddress = await currentUser.get('ethAddress')\n    await setUserData({username:usernameRetrieve, email:emailRetrieve, address: ethAddress})\n  }\n\n\n  async function getGallery(address){\n      // get user profile\n      const targetAddress = address;\n      console.log('address targeted: ',targetAddress)\n      const profile = await getProfileForAddress(targetAddress);\n      console.log('Profile: ',profile);\n      if (profile.pics.length > 0) {\n        setGallery(profile.pics)\n      } else {\n        alert(\"No pics from: \",{address});\n      }\n    }\n\n  async function getMyGallery() {\n      // get user profile\n      getGallery(userData.address);\n    }\n\n\n//App handler functions\n  function selectNft(pic){\n    setNftSelected(pic);\n    // setGalleryOpen(false);\n  }\n\n\n\n\n  return (\n    <Container fluid className=\"App\">\n      <Row style={{ height: '70px', padding: '5px 0', }} className=\"justify-content-end\">\n      {/*Login/Logout, address, name, edit user data*/}\n        { userData && userData.address?\n          <div style={{marginRight: '5px'}}>\n              {userData.address.slice(0,7)}..\n          </div>\n        :null}\n        <LogButton\n          userData={userData}\n          login={login}\n          logout={logout}\n          />\n        { userData?\n            <div style={{marginLeft: '5px',marginRight: '5px'}}>\n                {userData.username}\n                <Button onClick={()=>{console.log('TODO')}}>Edit</Button>\n            </div>\n          :null}\n{/* this will be prompt for new users,(form) to create username, email, etc */}\n        {user && !userData?\n          <Button onClick={()=>{console.log('TODO')}}>Set</Button>\n        :null}\n      </Row>\n      <Row\n        className=\"flex justify-content-center border\"\n        style={{background: 'lightblue',}}\n        onClick={()=>{setNftSelected(null)}}\n        >\n      {/*title minter*/}\n          <h2>Mint new NFT</h2>\n      </Row>\n      <Row className='flex border'>\n          {/*image handler */}\n        {nftSelected?\n          <CharacterSheet\n            user={user}\n            nftSelected={nftSelected}\n          />\n          :\n          <MinterSpace  user={user} />\n        }\n      </Row>\n      <Row className=' justify-content-center border' style={{background: 'lightgreen',}}>\n      {/*Collection list and character sheet handler */}\n        <h3>My Collection </h3>\n        {gallery?<h3 style={{marginLeft:'5px'}}>{gallery.length}</h3>:null}\n      </Row>\n      <Row>\n        { gallery?\n          <div className='container center' id='gallery'>\n            {gallery.map(function(d){\n              return(\n                <a onClick={()=>{setNftSelected(d)}}>\n                  <img src={d.url} alt={d.name} height=\"200\" width=\"200\" margin=\"5px\"></img>\n                </a>\n                )\n                })}\n          </div>\n          :\n          <p className='center'>You have no NFTs minted! Do your first!!</p>\n        }\n        </Row>\n          <Col>\n            {/*Thumb */}\n          </Col>\n          <Col>\n            {/* Metadata */}\n          </Col>\n          <Col>\n            {/*handlers */}\n          </Col>\n        <Row>\n      </Row>\n      <Row className=' justify-content-center border' style={{background: 'grey',}}>\n      {/*Likes list ..*/}\n      <h3 className='center'>Likes</h3>\n      </Row>\n      <Row className=' justify-content-center border' style={{background: 'coral',}}>\n      {/*Users list */}\n      <h3 className='center'>Other users</h3>\n      </Row>\n    </Container>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}