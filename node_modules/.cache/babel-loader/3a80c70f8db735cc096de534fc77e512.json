{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime-corejs3/helpers/interopRequireWildcard\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.getState = getState;\nexports.initializeState = initializeState;\nexports.removeState = removeState;\nexports.getServerData = getServerData;\nexports.setServerData = setServerData;\nexports.getPendingOps = getPendingOps;\nexports.setPendingOp = setPendingOp;\nexports.pushPendingState = pushPendingState;\nexports.popPendingState = popPendingState;\nexports.mergeFirstPendingState = mergeFirstPendingState;\nexports.getObjectCache = getObjectCache;\nexports.estimateAttribute = estimateAttribute;\nexports.estimateAttributes = estimateAttributes;\nexports.commitServerChanges = commitServerChanges;\nexports.enqueueTask = enqueueTask;\nexports.clearAllState = clearAllState;\nexports.duplicateState = duplicateState;\n\nvar ObjectStateMutations = _interopRequireWildcard(require(\"./ObjectStateMutations\"));\n/**\r\n * Copyright (c) 2015-present, Parse, LLC.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the BSD-style license found in the\r\n * LICENSE file in the root directory of this source tree. An additional grant\r\n * of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n * @flow\r\n */\n\n\nvar objectState\n/*: {\r\n  [className: string]: {\r\n    [id: string]: State,\r\n  },\r\n}*/\n= {};\n\nfunction getState(obj\n/*: ObjectIdentifier*/\n)\n/*: ?State*/\n{\n  var classData = objectState[obj.className];\n\n  if (classData) {\n    return classData[obj.id] || null;\n  }\n\n  return null;\n}\n\nfunction initializeState(obj\n/*: ObjectIdentifier*/\n, initial\n/*:: ?: State*/\n)\n/*: State*/\n{\n  var state = getState(obj);\n\n  if (state) {\n    return state;\n  }\n\n  if (!objectState[obj.className]) {\n    objectState[obj.className] = {};\n  }\n\n  if (!initial) {\n    initial = ObjectStateMutations.defaultState();\n  }\n\n  state = objectState[obj.className][obj.id] = initial;\n  return state;\n}\n\nfunction removeState(obj\n/*: ObjectIdentifier*/\n)\n/*: ?State*/\n{\n  var state = getState(obj);\n\n  if (state === null) {\n    return null;\n  }\n\n  delete objectState[obj.className][obj.id];\n  return state;\n}\n\nfunction getServerData(obj\n/*: ObjectIdentifier*/\n)\n/*: AttributeMap*/\n{\n  var state = getState(obj);\n\n  if (state) {\n    return state.serverData;\n  }\n\n  return {};\n}\n\nfunction setServerData(obj\n/*: ObjectIdentifier*/\n, attributes\n/*: AttributeMap*/\n) {\n  var serverData = initializeState(obj).serverData;\n  ObjectStateMutations.setServerData(serverData, attributes);\n}\n\nfunction getPendingOps(obj\n/*: ObjectIdentifier*/\n)\n/*: Array<OpsMap>*/\n{\n  var state = getState(obj);\n\n  if (state) {\n    return state.pendingOps;\n  }\n\n  return [{}];\n}\n\nfunction setPendingOp(obj\n/*: ObjectIdentifier*/\n, attr\n/*: string*/\n, op\n/*: ?Op*/\n) {\n  var pendingOps = initializeState(obj).pendingOps;\n  ObjectStateMutations.setPendingOp(pendingOps, attr, op);\n}\n\nfunction pushPendingState(obj\n/*: ObjectIdentifier*/\n) {\n  var pendingOps = initializeState(obj).pendingOps;\n  ObjectStateMutations.pushPendingState(pendingOps);\n}\n\nfunction popPendingState(obj\n/*: ObjectIdentifier*/\n)\n/*: OpsMap*/\n{\n  var pendingOps = initializeState(obj).pendingOps;\n  return ObjectStateMutations.popPendingState(pendingOps);\n}\n\nfunction mergeFirstPendingState(obj\n/*: ObjectIdentifier*/\n) {\n  var pendingOps = getPendingOps(obj);\n  ObjectStateMutations.mergeFirstPendingState(pendingOps);\n}\n\nfunction getObjectCache(obj\n/*: ObjectIdentifier*/\n)\n/*: ObjectCache*/\n{\n  var state = getState(obj);\n\n  if (state) {\n    return state.objectCache;\n  }\n\n  return {};\n}\n\nfunction estimateAttribute(obj\n/*: ObjectIdentifier*/\n, attr\n/*: string*/\n)\n/*: mixed*/\n{\n  var serverData = getServerData(obj);\n  var pendingOps = getPendingOps(obj);\n  return ObjectStateMutations.estimateAttribute(serverData, pendingOps, obj.className, obj.id, attr);\n}\n\nfunction estimateAttributes(obj\n/*: ObjectIdentifier*/\n)\n/*: AttributeMap*/\n{\n  var serverData = getServerData(obj);\n  var pendingOps = getPendingOps(obj);\n  return ObjectStateMutations.estimateAttributes(serverData, pendingOps, obj.className, obj.id);\n}\n\nfunction commitServerChanges(obj\n/*: ObjectIdentifier*/\n, changes\n/*: AttributeMap*/\n) {\n  var state = initializeState(obj);\n  ObjectStateMutations.commitServerChanges(state.serverData, state.objectCache, changes);\n}\n\nfunction enqueueTask(obj\n/*: ObjectIdentifier*/\n, task\n/*: () => Promise*/\n)\n/*: Promise*/\n{\n  var state = initializeState(obj);\n  return state.tasks.enqueue(task);\n}\n\nfunction clearAllState() {\n  objectState = {};\n}\n\nfunction duplicateState(source\n/*: { id: string }*/\n, dest\n/*: { id: string }*/\n) {\n  dest.id = source.id;\n}","map":{"version":3,"sources":["D:/8 Github/baler/node_modules/moralis/lib/browser/SingleInstanceStateController.js"],"names":["_interopRequireWildcard","require","_Object$defineProperty","exports","value","getState","initializeState","removeState","getServerData","setServerData","getPendingOps","setPendingOp","pushPendingState","popPendingState","mergeFirstPendingState","getObjectCache","estimateAttribute","estimateAttributes","commitServerChanges","enqueueTask","clearAllState","duplicateState","ObjectStateMutations","objectState","obj","classData","className","id","initial","state","defaultState","serverData","attributes","pendingOps","attr","op","objectCache","changes","task","tasks","enqueue","source","dest"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\nvar _interopRequireWildcard = require(\"@babel/runtime-corejs3/helpers/interopRequireWildcard\");\r\n\r\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\r\n\r\n_Object$defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\n\r\nexports.getState = getState;\r\nexports.initializeState = initializeState;\r\nexports.removeState = removeState;\r\nexports.getServerData = getServerData;\r\nexports.setServerData = setServerData;\r\nexports.getPendingOps = getPendingOps;\r\nexports.setPendingOp = setPendingOp;\r\nexports.pushPendingState = pushPendingState;\r\nexports.popPendingState = popPendingState;\r\nexports.mergeFirstPendingState = mergeFirstPendingState;\r\nexports.getObjectCache = getObjectCache;\r\nexports.estimateAttribute = estimateAttribute;\r\nexports.estimateAttributes = estimateAttributes;\r\nexports.commitServerChanges = commitServerChanges;\r\nexports.enqueueTask = enqueueTask;\r\nexports.clearAllState = clearAllState;\r\nexports.duplicateState = duplicateState;\r\n\r\nvar ObjectStateMutations = _interopRequireWildcard(require(\"./ObjectStateMutations\"));\r\n/**\r\n * Copyright (c) 2015-present, Parse, LLC.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the BSD-style license found in the\r\n * LICENSE file in the root directory of this source tree. An additional grant\r\n * of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n * @flow\r\n */\r\n\r\n\r\nvar objectState\r\n/*: {\r\n  [className: string]: {\r\n    [id: string]: State,\r\n  },\r\n}*/\r\n= {};\r\n\r\nfunction getState(obj\r\n/*: ObjectIdentifier*/\r\n)\r\n/*: ?State*/\r\n{\r\n  var classData = objectState[obj.className];\r\n\r\n  if (classData) {\r\n    return classData[obj.id] || null;\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nfunction initializeState(obj\r\n/*: ObjectIdentifier*/\r\n, initial\r\n/*:: ?: State*/\r\n)\r\n/*: State*/\r\n{\r\n  var state = getState(obj);\r\n\r\n  if (state) {\r\n    return state;\r\n  }\r\n\r\n  if (!objectState[obj.className]) {\r\n    objectState[obj.className] = {};\r\n  }\r\n\r\n  if (!initial) {\r\n    initial = ObjectStateMutations.defaultState();\r\n  }\r\n\r\n  state = objectState[obj.className][obj.id] = initial;\r\n  return state;\r\n}\r\n\r\nfunction removeState(obj\r\n/*: ObjectIdentifier*/\r\n)\r\n/*: ?State*/\r\n{\r\n  var state = getState(obj);\r\n\r\n  if (state === null) {\r\n    return null;\r\n  }\r\n\r\n  delete objectState[obj.className][obj.id];\r\n  return state;\r\n}\r\n\r\nfunction getServerData(obj\r\n/*: ObjectIdentifier*/\r\n)\r\n/*: AttributeMap*/\r\n{\r\n  var state = getState(obj);\r\n\r\n  if (state) {\r\n    return state.serverData;\r\n  }\r\n\r\n  return {};\r\n}\r\n\r\nfunction setServerData(obj\r\n/*: ObjectIdentifier*/\r\n, attributes\r\n/*: AttributeMap*/\r\n) {\r\n  var serverData = initializeState(obj).serverData;\r\n  ObjectStateMutations.setServerData(serverData, attributes);\r\n}\r\n\r\nfunction getPendingOps(obj\r\n/*: ObjectIdentifier*/\r\n)\r\n/*: Array<OpsMap>*/\r\n{\r\n  var state = getState(obj);\r\n\r\n  if (state) {\r\n    return state.pendingOps;\r\n  }\r\n\r\n  return [{}];\r\n}\r\n\r\nfunction setPendingOp(obj\r\n/*: ObjectIdentifier*/\r\n, attr\r\n/*: string*/\r\n, op\r\n/*: ?Op*/\r\n) {\r\n  var pendingOps = initializeState(obj).pendingOps;\r\n  ObjectStateMutations.setPendingOp(pendingOps, attr, op);\r\n}\r\n\r\nfunction pushPendingState(obj\r\n/*: ObjectIdentifier*/\r\n) {\r\n  var pendingOps = initializeState(obj).pendingOps;\r\n  ObjectStateMutations.pushPendingState(pendingOps);\r\n}\r\n\r\nfunction popPendingState(obj\r\n/*: ObjectIdentifier*/\r\n)\r\n/*: OpsMap*/\r\n{\r\n  var pendingOps = initializeState(obj).pendingOps;\r\n  return ObjectStateMutations.popPendingState(pendingOps);\r\n}\r\n\r\nfunction mergeFirstPendingState(obj\r\n/*: ObjectIdentifier*/\r\n) {\r\n  var pendingOps = getPendingOps(obj);\r\n  ObjectStateMutations.mergeFirstPendingState(pendingOps);\r\n}\r\n\r\nfunction getObjectCache(obj\r\n/*: ObjectIdentifier*/\r\n)\r\n/*: ObjectCache*/\r\n{\r\n  var state = getState(obj);\r\n\r\n  if (state) {\r\n    return state.objectCache;\r\n  }\r\n\r\n  return {};\r\n}\r\n\r\nfunction estimateAttribute(obj\r\n/*: ObjectIdentifier*/\r\n, attr\r\n/*: string*/\r\n)\r\n/*: mixed*/\r\n{\r\n  var serverData = getServerData(obj);\r\n  var pendingOps = getPendingOps(obj);\r\n  return ObjectStateMutations.estimateAttribute(serverData, pendingOps, obj.className, obj.id, attr);\r\n}\r\n\r\nfunction estimateAttributes(obj\r\n/*: ObjectIdentifier*/\r\n)\r\n/*: AttributeMap*/\r\n{\r\n  var serverData = getServerData(obj);\r\n  var pendingOps = getPendingOps(obj);\r\n  return ObjectStateMutations.estimateAttributes(serverData, pendingOps, obj.className, obj.id);\r\n}\r\n\r\nfunction commitServerChanges(obj\r\n/*: ObjectIdentifier*/\r\n, changes\r\n/*: AttributeMap*/\r\n) {\r\n  var state = initializeState(obj);\r\n  ObjectStateMutations.commitServerChanges(state.serverData, state.objectCache, changes);\r\n}\r\n\r\nfunction enqueueTask(obj\r\n/*: ObjectIdentifier*/\r\n, task\r\n/*: () => Promise*/\r\n)\r\n/*: Promise*/\r\n{\r\n  var state = initializeState(obj);\r\n  return state.tasks.enqueue(task);\r\n}\r\n\r\nfunction clearAllState() {\r\n  objectState = {};\r\n}\r\n\r\nfunction duplicateState(source\r\n/*: { id: string }*/\r\n, dest\r\n/*: { id: string }*/\r\n) {\r\n  dest.id = source.id;\r\n}"]},"metadata":{},"sourceType":"script"}