{"ast":null,"code":"var _jsxFileName = \"D:\\\\8 Github\\\\baler\\\\src\\\\components\\\\minterSpace.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport Button from 'react-bootstrap/Button';\nimport DragAndDrop from './dragAndDrop';\nimport Image from 'react-bootstrap/Image';\nimport draganddrop from '../images/drag.png';\nimport Col from 'react-bootstrap/Col';\nimport Row from 'react-bootstrap/Row';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Moralis = require('moralis');\n\nconst MinterSpace = props => {\n  _s();\n\n  const [image, setImage] = useState(null);\n\n  function handleDrop(files) {\n    setImage(files[0]);\n    console.log('Dropped ', files[0]);\n    document.getElementById('imageName').value = files[0].name; // console.log(files)\n  }\n\n  async function uploadImage() {\n    const imageName = document.getElementById('imageName').value;\n    const file = image;\n    const moralisFile = new Moralis.File(imageName, file);\n    moralisFile.save().then(function () {\n      setImage(null);\n      const userImg = new Moralis.Object(\"UserImage\");\n      userImg.set(\"userId\", props.user.id);\n      userImg.set(\"img\", moralisFile);\n      userImg.set(\"Title\", document.getElementById('title').value);\n      userImg.set(\"Copies\", document.getElementById('copies').value);\n      userImg.set(\"Beneficiary\", document.getElementById('beneficiary').value);\n      userImg.save().then(() => {\n        alert(\"Data uploaded to server!\"); // mint token\n\n        const currentUser = Moralis.User.current();\n        const userAddress = currentUser.get('ethAddress');\n        const savedImgURL = userImg.attributes.img._url;\n        window.contractInstance.methods.mint(userAddress, savedImgURL, [1, 2]).send({\n          from: userAddress,\n          gas: 25000000\n        }).then(() => {\n          alert(\"Token Minted!\");\n        }); //listen to the event, upload [to, tokenId, URI] into the object\n      });\n    }, error => {\n      alert(error);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex\",\n    style: {\n      width: '100%'\n    },\n    children: /*#__PURE__*/_jsxDEV(DragAndDrop, {\n      handleDrop: handleDrop,\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-center\",\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          className: \"flex\",\n          children: [/*#__PURE__*/_jsxDEV(Image, {\n            src: draganddrop,\n            rounded: true,\n            alt: \"drag-logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 15\n          }, this), !image ? /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Insert an image here!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 17\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          className: \"flex justify-content-center align-content-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: image && image.name ? image.name : 'name',\n              id: \"imageName\",\n              type: \"text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 105\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"Title\",\n              id: \"title\",\n              type: \"text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 69\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"Copies\",\n              id: \"copies\",\n              type: \"number\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 64,\n              columnNumber: 73\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"Address beneficiary\",\n              id: \"beneficiary\",\n              type: \"text\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 65,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"justify-content-center\",\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          className: \"btn-success\",\n          onClick: uploadImage,\n          disabled: !image,\n          children: \"Bale it!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          className: \"btn-danger\",\n          disabled: !image,\n          onClick: () => {\n            setImage(null);\n          },\n          children: \"Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 7\n  }, this);\n};\n\n_s(MinterSpace, \"azb7M8tR7S/vp1+UqWJMufJLR5I=\");\n\n_c = MinterSpace;\nexport default MinterSpace;\n\nvar _c;\n\n$RefreshReg$(_c, \"MinterSpace\");","map":{"version":3,"sources":["D:/8 Github/baler/src/components/minterSpace.js"],"names":["React","useState","Button","DragAndDrop","Image","draganddrop","Col","Row","Moralis","require","MinterSpace","props","image","setImage","handleDrop","files","console","log","document","getElementById","value","name","uploadImage","imageName","file","moralisFile","File","save","then","userImg","Object","set","user","id","alert","currentUser","User","current","userAddress","get","savedImgURL","attributes","img","_url","window","contractInstance","methods","mint","send","from","gas","error","width"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\r\nimport Button from 'react-bootstrap/Button';\r\nimport DragAndDrop from './dragAndDrop';\r\nimport Image from 'react-bootstrap/Image';\r\nimport draganddrop from '../images/drag.png';\r\nimport Col from 'react-bootstrap/Col'\r\nimport Row from 'react-bootstrap/Row'\r\n\r\nconst Moralis = require('moralis');\r\n\r\nconst MinterSpace = (props) => {\r\n\r\n  const [image, setImage] = useState(null);\r\n\r\n  function handleDrop(files){\r\n    setImage(files[0]);\r\n    console.log('Dropped ',files[0]);\r\n    document.getElementById('imageName').value = files[0].name;\r\n    // console.log(files)\r\n  }\r\n\r\n  async function uploadImage(){\r\n    const imageName = document.getElementById('imageName').value;\r\n    const file = image;\r\n    const moralisFile = new Moralis.File(imageName, file);\r\n    moralisFile.save()\r\n    .then(function() {\r\n        setImage(null);\r\n        const userImg = new Moralis.Object(\"UserImage\");\r\n        userImg.set(\"userId\", props.user.id);\r\n        userImg.set(\"img\", moralisFile);\r\n        userImg.set(\"Title\",document.getElementById('title').value);\r\n        userImg.set(\"Copies\",document.getElementById('copies').value);\r\n        userImg.set(\"Beneficiary\",document.getElementById('beneficiary').value);\r\n        userImg.save()\r\n          .then(() => {\r\n            alert(\"Data uploaded to server!\");\r\n            // mint token\r\n            const currentUser = Moralis.User.current();\r\n            const userAddress = currentUser.get('ethAddress');\r\n            const savedImgURL = userImg.attributes.img._url;\r\n            window.contractInstance.methods.mint(userAddress , savedImgURL, [1,2])\r\n              .send({from: userAddress, gas:25000000 })\r\n              .then(() => {alert(\"Token Minted!\")})\r\n              //listen to the event, upload [to, tokenId, URI] into the object\r\n          });\r\n    }, (error) => {alert(error);})\r\n  }\r\n    return (\r\n      <div className='flex' style={{width:'100%'}}>\r\n        <DragAndDrop handleDrop={handleDrop}>\r\n          <Row className='justify-content-center'>\r\n            <Col className='flex'>\r\n              <Image src={draganddrop} rounded alt=\"drag-logo\"  />\r\n              {!image?\r\n                <p>Insert an image here!</p>\r\n                :null}\r\n            </Col>\r\n\r\n            <Col className='flex justify-content-center align-content-center'>\r\n              <div>\r\n                <input placeholder={image && image.name?image.name:'name'} id=\"imageName\" type=\"text\" /><br />\r\n                <input placeholder='Title' id=\"title\" type=\"text\" /><br />\r\n                <input placeholder='Copies' id=\"copies\" type=\"number\" /><br />\r\n                <input placeholder='Address beneficiary' id=\"beneficiary\" type=\"text\" />\r\n              </div>\r\n            </Col>\r\n          </Row>\r\n          <Row className='justify-content-center'>\r\n            <Button className='btn-success' onClick={uploadImage} disabled={!image}>Bale it!</Button>\r\n            <Button className='btn-danger' disabled={!image} onClick={()=>{\r\n                setImage(null);\r\n              }}>Cancel</Button>\r\n          </Row>\r\n        </DragAndDrop>\r\n      </div>\r\n    )\r\n}\r\n\r\nexport default MinterSpace;\r\n"]},"metadata":{},"sourceType":"module"}