{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireWildcard = require(\"@babel/runtime-corejs3/helpers/interopRequireWildcard\");\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\n\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\n\n_Object$defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports.getState = getState;\nexports.initializeState = initializeState;\nexports.removeState = removeState;\nexports.getServerData = getServerData;\nexports.setServerData = setServerData;\nexports.getPendingOps = getPendingOps;\nexports.setPendingOp = setPendingOp;\nexports.pushPendingState = pushPendingState;\nexports.popPendingState = popPendingState;\nexports.mergeFirstPendingState = mergeFirstPendingState;\nexports.getObjectCache = getObjectCache;\nexports.estimateAttribute = estimateAttribute;\nexports.estimateAttributes = estimateAttributes;\nexports.commitServerChanges = commitServerChanges;\nexports.enqueueTask = enqueueTask;\nexports.duplicateState = duplicateState;\nexports.clearAllState = clearAllState;\n\nvar _weakMap = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/weak-map\"));\n\nvar ObjectStateMutations = _interopRequireWildcard(require(\"./ObjectStateMutations\"));\n\nvar _TaskQueue = _interopRequireDefault(require(\"./TaskQueue\"));\n/**\r\n * Copyright (c) 2015-present, Parse, LLC.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the BSD-style license found in the\r\n * LICENSE file in the root directory of this source tree. An additional grant\r\n * of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n * @flow\r\n */\n\n\nvar objectState = new _weakMap.default();\n\nfunction getState(obj\n/*: ParseObject*/\n)\n/*: ?State*/\n{\n  var classData = objectState.get(obj);\n  return classData || null;\n}\n\nfunction initializeState(obj\n/*: ParseObject*/\n, initial\n/*:: ?: State*/\n)\n/*: State*/\n{\n  var state = getState(obj);\n\n  if (state) {\n    return state;\n  }\n\n  if (!initial) {\n    initial = {\n      serverData: {},\n      pendingOps: [{}],\n      objectCache: {},\n      tasks: new _TaskQueue.default(),\n      existed: false\n    };\n  }\n\n  state = initial;\n  objectState.set(obj, state);\n  return state;\n}\n\nfunction removeState(obj\n/*: ParseObject*/\n)\n/*: ?State*/\n{\n  var state = getState(obj);\n\n  if (state === null) {\n    return null;\n  }\n\n  objectState.delete(obj);\n  return state;\n}\n\nfunction getServerData(obj\n/*: ParseObject*/\n)\n/*: AttributeMap*/\n{\n  var state = getState(obj);\n\n  if (state) {\n    return state.serverData;\n  }\n\n  return {};\n}\n\nfunction setServerData(obj\n/*: ParseObject*/\n, attributes\n/*: AttributeMap*/\n) {\n  var serverData = initializeState(obj).serverData;\n  ObjectStateMutations.setServerData(serverData, attributes);\n}\n\nfunction getPendingOps(obj\n/*: ParseObject*/\n)\n/*: Array<OpsMap>*/\n{\n  var state = getState(obj);\n\n  if (state) {\n    return state.pendingOps;\n  }\n\n  return [{}];\n}\n\nfunction setPendingOp(obj\n/*: ParseObject*/\n, attr\n/*: string*/\n, op\n/*: ?Op*/\n) {\n  var pendingOps = initializeState(obj).pendingOps;\n  ObjectStateMutations.setPendingOp(pendingOps, attr, op);\n}\n\nfunction pushPendingState(obj\n/*: ParseObject*/\n) {\n  var pendingOps = initializeState(obj).pendingOps;\n  ObjectStateMutations.pushPendingState(pendingOps);\n}\n\nfunction popPendingState(obj\n/*: ParseObject*/\n)\n/*: OpsMap*/\n{\n  var pendingOps = initializeState(obj).pendingOps;\n  return ObjectStateMutations.popPendingState(pendingOps);\n}\n\nfunction mergeFirstPendingState(obj\n/*: ParseObject*/\n) {\n  var pendingOps = getPendingOps(obj);\n  ObjectStateMutations.mergeFirstPendingState(pendingOps);\n}\n\nfunction getObjectCache(obj\n/*: ParseObject*/\n)\n/*: ObjectCache*/\n{\n  var state = getState(obj);\n\n  if (state) {\n    return state.objectCache;\n  }\n\n  return {};\n}\n\nfunction estimateAttribute(obj\n/*: ParseObject*/\n, attr\n/*: string*/\n)\n/*: mixed*/\n{\n  var serverData = getServerData(obj);\n  var pendingOps = getPendingOps(obj);\n  return ObjectStateMutations.estimateAttribute(serverData, pendingOps, obj.className, obj.id, attr);\n}\n\nfunction estimateAttributes(obj\n/*: ParseObject*/\n)\n/*: AttributeMap*/\n{\n  var serverData = getServerData(obj);\n  var pendingOps = getPendingOps(obj);\n  return ObjectStateMutations.estimateAttributes(serverData, pendingOps, obj.className, obj.id);\n}\n\nfunction commitServerChanges(obj\n/*: ParseObject*/\n, changes\n/*: AttributeMap*/\n) {\n  var state = initializeState(obj);\n  ObjectStateMutations.commitServerChanges(state.serverData, state.objectCache, changes);\n}\n\nfunction enqueueTask(obj\n/*: ParseObject*/\n, task\n/*: () => Promise*/\n)\n/*: Promise*/\n{\n  var state = initializeState(obj);\n  return state.tasks.enqueue(task);\n}\n\nfunction duplicateState(source\n/*: ParseObject*/\n, dest\n/*: ParseObject*/\n)\n/*: void*/\n{\n  var oldState = initializeState(source);\n  var newState = initializeState(dest);\n\n  for (var key in oldState.serverData) {\n    newState.serverData[key] = oldState.serverData[key];\n  }\n\n  for (var index = 0; index < oldState.pendingOps.length; index++) {\n    for (var _key in oldState.pendingOps[index]) {\n      newState.pendingOps[index][_key] = oldState.pendingOps[index][_key];\n    }\n  }\n\n  for (var _key2 in oldState.objectCache) {\n    newState.objectCache[_key2] = oldState.objectCache[_key2];\n  }\n\n  newState.existed = oldState.existed;\n}\n\nfunction clearAllState() {\n  objectState = new _weakMap.default();\n}","map":{"version":3,"sources":["D:/8 Github/baler/node_modules/moralis/lib/browser/UniqueInstanceStateController.js"],"names":["_interopRequireWildcard","require","_interopRequireDefault","_Object$defineProperty","exports","value","getState","initializeState","removeState","getServerData","setServerData","getPendingOps","setPendingOp","pushPendingState","popPendingState","mergeFirstPendingState","getObjectCache","estimateAttribute","estimateAttributes","commitServerChanges","enqueueTask","duplicateState","clearAllState","_weakMap","ObjectStateMutations","_TaskQueue","objectState","default","obj","classData","get","initial","state","serverData","pendingOps","objectCache","tasks","existed","set","delete","attributes","attr","op","className","id","changes","task","enqueue","source","dest","oldState","newState","key","index","length","_key","_key2"],"mappings":"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","sourcesContent":["\"use strict\";\r\n\r\nvar _interopRequireWildcard = require(\"@babel/runtime-corejs3/helpers/interopRequireWildcard\");\r\n\r\nvar _interopRequireDefault = require(\"@babel/runtime-corejs3/helpers/interopRequireDefault\");\r\n\r\nvar _Object$defineProperty = require(\"@babel/runtime-corejs3/core-js-stable/object/define-property\");\r\n\r\n_Object$defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\n\r\nexports.getState = getState;\r\nexports.initializeState = initializeState;\r\nexports.removeState = removeState;\r\nexports.getServerData = getServerData;\r\nexports.setServerData = setServerData;\r\nexports.getPendingOps = getPendingOps;\r\nexports.setPendingOp = setPendingOp;\r\nexports.pushPendingState = pushPendingState;\r\nexports.popPendingState = popPendingState;\r\nexports.mergeFirstPendingState = mergeFirstPendingState;\r\nexports.getObjectCache = getObjectCache;\r\nexports.estimateAttribute = estimateAttribute;\r\nexports.estimateAttributes = estimateAttributes;\r\nexports.commitServerChanges = commitServerChanges;\r\nexports.enqueueTask = enqueueTask;\r\nexports.duplicateState = duplicateState;\r\nexports.clearAllState = clearAllState;\r\n\r\nvar _weakMap = _interopRequireDefault(require(\"@babel/runtime-corejs3/core-js-stable/weak-map\"));\r\n\r\nvar ObjectStateMutations = _interopRequireWildcard(require(\"./ObjectStateMutations\"));\r\n\r\nvar _TaskQueue = _interopRequireDefault(require(\"./TaskQueue\"));\r\n/**\r\n * Copyright (c) 2015-present, Parse, LLC.\r\n * All rights reserved.\r\n *\r\n * This source code is licensed under the BSD-style license found in the\r\n * LICENSE file in the root directory of this source tree. An additional grant\r\n * of patent rights can be found in the PATENTS file in the same directory.\r\n *\r\n * @flow\r\n */\r\n\r\n\r\nvar objectState = new _weakMap.default();\r\n\r\nfunction getState(obj\r\n/*: ParseObject*/\r\n)\r\n/*: ?State*/\r\n{\r\n  var classData = objectState.get(obj);\r\n  return classData || null;\r\n}\r\n\r\nfunction initializeState(obj\r\n/*: ParseObject*/\r\n, initial\r\n/*:: ?: State*/\r\n)\r\n/*: State*/\r\n{\r\n  var state = getState(obj);\r\n\r\n  if (state) {\r\n    return state;\r\n  }\r\n\r\n  if (!initial) {\r\n    initial = {\r\n      serverData: {},\r\n      pendingOps: [{}],\r\n      objectCache: {},\r\n      tasks: new _TaskQueue.default(),\r\n      existed: false\r\n    };\r\n  }\r\n\r\n  state = initial;\r\n  objectState.set(obj, state);\r\n  return state;\r\n}\r\n\r\nfunction removeState(obj\r\n/*: ParseObject*/\r\n)\r\n/*: ?State*/\r\n{\r\n  var state = getState(obj);\r\n\r\n  if (state === null) {\r\n    return null;\r\n  }\r\n\r\n  objectState.delete(obj);\r\n  return state;\r\n}\r\n\r\nfunction getServerData(obj\r\n/*: ParseObject*/\r\n)\r\n/*: AttributeMap*/\r\n{\r\n  var state = getState(obj);\r\n\r\n  if (state) {\r\n    return state.serverData;\r\n  }\r\n\r\n  return {};\r\n}\r\n\r\nfunction setServerData(obj\r\n/*: ParseObject*/\r\n, attributes\r\n/*: AttributeMap*/\r\n) {\r\n  var serverData = initializeState(obj).serverData;\r\n  ObjectStateMutations.setServerData(serverData, attributes);\r\n}\r\n\r\nfunction getPendingOps(obj\r\n/*: ParseObject*/\r\n)\r\n/*: Array<OpsMap>*/\r\n{\r\n  var state = getState(obj);\r\n\r\n  if (state) {\r\n    return state.pendingOps;\r\n  }\r\n\r\n  return [{}];\r\n}\r\n\r\nfunction setPendingOp(obj\r\n/*: ParseObject*/\r\n, attr\r\n/*: string*/\r\n, op\r\n/*: ?Op*/\r\n) {\r\n  var pendingOps = initializeState(obj).pendingOps;\r\n  ObjectStateMutations.setPendingOp(pendingOps, attr, op);\r\n}\r\n\r\nfunction pushPendingState(obj\r\n/*: ParseObject*/\r\n) {\r\n  var pendingOps = initializeState(obj).pendingOps;\r\n  ObjectStateMutations.pushPendingState(pendingOps);\r\n}\r\n\r\nfunction popPendingState(obj\r\n/*: ParseObject*/\r\n)\r\n/*: OpsMap*/\r\n{\r\n  var pendingOps = initializeState(obj).pendingOps;\r\n  return ObjectStateMutations.popPendingState(pendingOps);\r\n}\r\n\r\nfunction mergeFirstPendingState(obj\r\n/*: ParseObject*/\r\n) {\r\n  var pendingOps = getPendingOps(obj);\r\n  ObjectStateMutations.mergeFirstPendingState(pendingOps);\r\n}\r\n\r\nfunction getObjectCache(obj\r\n/*: ParseObject*/\r\n)\r\n/*: ObjectCache*/\r\n{\r\n  var state = getState(obj);\r\n\r\n  if (state) {\r\n    return state.objectCache;\r\n  }\r\n\r\n  return {};\r\n}\r\n\r\nfunction estimateAttribute(obj\r\n/*: ParseObject*/\r\n, attr\r\n/*: string*/\r\n)\r\n/*: mixed*/\r\n{\r\n  var serverData = getServerData(obj);\r\n  var pendingOps = getPendingOps(obj);\r\n  return ObjectStateMutations.estimateAttribute(serverData, pendingOps, obj.className, obj.id, attr);\r\n}\r\n\r\nfunction estimateAttributes(obj\r\n/*: ParseObject*/\r\n)\r\n/*: AttributeMap*/\r\n{\r\n  var serverData = getServerData(obj);\r\n  var pendingOps = getPendingOps(obj);\r\n  return ObjectStateMutations.estimateAttributes(serverData, pendingOps, obj.className, obj.id);\r\n}\r\n\r\nfunction commitServerChanges(obj\r\n/*: ParseObject*/\r\n, changes\r\n/*: AttributeMap*/\r\n) {\r\n  var state = initializeState(obj);\r\n  ObjectStateMutations.commitServerChanges(state.serverData, state.objectCache, changes);\r\n}\r\n\r\nfunction enqueueTask(obj\r\n/*: ParseObject*/\r\n, task\r\n/*: () => Promise*/\r\n)\r\n/*: Promise*/\r\n{\r\n  var state = initializeState(obj);\r\n  return state.tasks.enqueue(task);\r\n}\r\n\r\nfunction duplicateState(source\r\n/*: ParseObject*/\r\n, dest\r\n/*: ParseObject*/\r\n)\r\n/*: void*/\r\n{\r\n  var oldState = initializeState(source);\r\n  var newState = initializeState(dest);\r\n\r\n  for (var key in oldState.serverData) {\r\n    newState.serverData[key] = oldState.serverData[key];\r\n  }\r\n\r\n  for (var index = 0; index < oldState.pendingOps.length; index++) {\r\n    for (var _key in oldState.pendingOps[index]) {\r\n      newState.pendingOps[index][_key] = oldState.pendingOps[index][_key];\r\n    }\r\n  }\r\n\r\n  for (var _key2 in oldState.objectCache) {\r\n    newState.objectCache[_key2] = oldState.objectCache[_key2];\r\n  }\r\n\r\n  newState.existed = oldState.existed;\r\n}\r\n\r\nfunction clearAllState() {\r\n  objectState = new _weakMap.default();\r\n}"]},"metadata":{},"sourceType":"script"}